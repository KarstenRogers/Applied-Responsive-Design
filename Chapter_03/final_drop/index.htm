<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Welcome to Desolve</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="_css/main.css" rel="stylesheet" media="screen, projection">
</head>
<body>
<header id="pageHeader" role="banner">
  <hgroup>
    <h1>Desolve</h1>
    <h2>Fine Urban Photography</h2>
  </hgroup>
</header>
<nav id="mainNav" role="navigation" class="cf">
  <h2>Site navigation</h2>
  <ul class="topMenu expand">
    <li class="hover">
      <h3>Galleries</h3>
      <ul class="submenu expand">
        <li><a href="gallery/galleries.htm" title="all galleries" class="all">All Galleries</a></li>
        <li><a href="gallery/recent.htm" title="recent galleries" class="recent">Recent Galleries</a></li>
        <li><a href="gallery/archived.htm" title="archived galleries" class="archived">Archived Galleries</a></li>
        <li><a href="gallery/favorites.htm" title="member favorites" class="favorites">Member Favorites</a></li>
      </ul>
    </li>
    <li><a href="blog.htm" title="Read our adventures" class="blog">Blog</a></li>
    <li class="hover">
      <h3>Gear</h3>
      <ul class="submenu expand">
        <li><a href="gear/gear.htm" title="all gear" class="gear">Gear</a>
        <li><a href="gear/cameras.htm" title="cameras" class="cameras">Cameras</a></li>
        <li><a href="gear/lenses.htm" title="lenses" class="lenses">Lenses</a></li>
        <li><a href="gear/bags.htm" title="bags" class="bags">Bags</a></li>
        <li><a href="gear/apps.htm" title="our favorite apps" class="apps">Favorite Apps</a></li>
      </ul>
    </li>
    <li><a href="contact.htm" title="Get in touch" class="interact">Interact</a></li>
    <li class="hover">
      <h3>Shop</h3>
      <ul class="submenu expand">
        <li><a href="shop/shop.htm" title="Buy our stuff" class="shop">Shop</a>
        <li><a href="shop/prints.htm" title="cameras" class="cameras">Prints</a></li>
        <li><a href="shop/clothes.htm" title="clothes" class="clothes">Clothes</a></li>
        <li><a href="shop/accessories.htm" title="accessories" class="accessories">Accessories</a></li>
      </ul>
    </li>
    <li><a href="about.htm" title="Who are you guys?" class="about">About</a></li>
  </ul>
</nav>
<section id="content" role="main" class="cf">
  <div class="mission">
    <h1>We love urban photography</h1>
    <p>We’re betting you do to. Welcome to our site, a growing collection of galleries taken by a small group of passionate urban photographers. Visit our galleries, buy some of our prints, or drop us a line. While you’re at it, feel free to submit a gallery of your own. <strong>Welcome</strong>.</p>
  </div>
  <article id="latest">
    <h1>Our latest galleries</h1>
    <section class="philly">
      <h2><a href="philadelphia.htm" title="Philadelphia gallery">Philadelphia</a></h2>
      <p class="pubdate">
        <time datetime="2011-08-16" pubdate>Aug 2011</time>
      </p>
      <div class="preview"><a href="philadelphia.htm" title="Philadelphia gallery"></a></div>
      <p class="caption">Join us as we visit the city of brotherly love.</p>
    </section>
    <section class="chicago">
      <h2><a href="chicago.htm" title="Chicago gallery">Chicago</a></h2>
      <p class="pubdate">
        <time datetime="2011-04-24" pubdate>April 2011</time>
      </p>
      <div class="preview"><a href="chicago.htm" title="Chicago gallery"></a></div>
      <p class="caption">Big wind, big shoulders. See a different side of Chicago.</p>
    </section>
    <section class="nyc">
      <h2><a href="new_york.htm" title="New York gallery">New York</a></h2>
      <p class="pubdate">
        <time datetime="2011-01-10" pubdate>Jan 2011</time>
      </p>
      <div class="preview"><a href="new_york.htm" title="New York gallery"></a></div>
      <p class="caption">A little Christmas magic, Big Apple style.</p>
    </section>
  </article>
  <aside role="complementary">
    <nav id="archives">
      <h2>Archived Galleries</h2>
      <ul>
        <li><a href="charlotte.htm" title="charlotte">Charlotte</a></li>
        <li><a href="miami.htm" title="miami">Miami</a></li>
        <li><a href="denver.htm" title="denver">Denver</a></li>
        <li><a href="boston.htm" title="boston">Boston</a></li>
        <li><a href="cincinnati.htm" title="cincinnati">Cincinnati</a></li>
        <li><a href="lost_angeles.htm" title="los angeles">Los Angeles</a></li>
        <li><a href="charleston.htm" title="charleston">Charleston</a></li>
        <li><a href="dallas.htm" title="dallas">Dallas</a></li>
        <li><a href="providence.htm" title="providence">Providence</a></li>
        <li><a href="birmingham.htm" title="birmingham">Birmingham</a></li>
        <li><a href="cleveland.htm" title="cleveland">Cleveland</a></li>
        <li><a href="baltimore.htm" title="balitmore">Baltimore</a></li>
      </ul>
    </nav>
    <section class="contest">
      <h2>This month's contest</h2>
      <img src="_images/contest.jpg" width="200" height="200" alt="This month's contest">
      <p>Do you know where this is? Send your guess to us via the contact page. All correct entries will be added to a drawing at the end of the month. The randomly selected winner will win a framed print of their choice from our shop. Cool! <span class="enter"><a href="#" title="enter our contest">Enter</a></span></p>
    </section>
    <section class="contest">
      <h2>Previous contest</h2>
      <img src="_images/previous.jpg" width="200" height="200" alt="This month's contest">
      <h3>Cultural District, Denver CO</h3>
      <p>Congratulations to Daniel Weston, who correctly identified this shot as being located in the cultural district of Denver, Colorado! For his efforts, Daniel wins a limited edition print of this shot. Way to go Daniel!</p>
    </section>
  </aside>
</section>
<footer id="pageFooter">
  <form action="http://desolve.org" method="post" class="search-form">
    <label for="search">Looking for something?</label>
    <input type="search" placeholder="Search" title="Search" class="q" name="search" id="search">
    <input type="submit" class="submit" value="Go" name="submit">
  </form>
  <p><a href="http://www.twitter.com/jameswillweb">twitter</a></p>
  <p class="notice">&copy; 2011 desolve.org</p>
</footer>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
<script>
// variable to hold current window state - small, medium, or large
var windowState = 'large';

// check intital width of the screen, respond with appropriate menu
$(document).ready(function() {
    var sw = document.body.clientWidth;
    if (sw < 481) {
       smMenu();
    } else if (sw >= 481 && sw <= 768) {
		medMenu();
	} else {
		lgMenu();
	}
});

// take care of resizing the window
$(window).resize(function() {
	var sw = document.body.clientWidth;
    if (sw < 481 && windowState != 'small') {
       smMenu();
    }
	if (sw > 480 && sw < 769 && windowState != 'medium') {
       medMenu();
    }  
    if (sw > 768 && windowState != 'large') {
       lgMenu();
    } 
});

function smMenu() {
	// since we may be switching from another menu, reset the menu first
	//unbind click and touch events    
    $('.menuToggle a').off('click');
    $('.topMenu h3').off('click touchstart');
	$('html').off('touchstart');
	$('#mainNav').off('touchstart');
	//reset the menu in case it's being resized from a medium screen    
    // remove any expanded menus
	$('.expand').removeClass('expand');
	$('.menuToggle').remove();
    //now that the menu is reset, add the toggle and reinitialize the indicator
     $('.topMenu').before('<div class="menuToggle"><a href="#">menu<span class="indicator">+</span></a></div>');
    // append the + indicator
     $('.topMenu h3').append('<span class="indicator">+</span>');

    // wire up clicks and changing the various menu states
	//we'll use clicks instead of touch in case a smaller screen has a pointer device
	//first, let's deal with the menu toggle
	$('.menuToggle a').click(function() {
		//expand the menu
		$('.topMenu').toggleClass('expand');
		// figure out whether the indicator should be changed to + or -
		var newValue = $(this).find('span.indicator').text() == '+' ? '-' : '+';
		// set the new value of the indicator
		$(this).find('span.indicator').text(newValue);
	});
	
	//now we'll wire up the submenus
	$(".topMenu h3").click(function() {
		//find the current submenu
		var currentItem = $(this).siblings('.submenu');
		//remove the expand class from other submenus to close any currently open submenus
		$('ul.submenu').not(currentItem).removeClass('expand');
		//change the indicator of any closed submenus 
		$('.topMenu h3').not(this).find('span.indicator:contains("-")').text('+');
		//open the selected submenu
		$(this).siblings('.submenu').toggleClass('expand');
		//change the selected submenu indicator
		var newValue = $(this).find('span.indicator').text() == '+' ? '-' : '+';
        $(this).find('span.indicator').text(newValue);
	});
	//indicate current window state
	windowState = 'small';
}

function medMenu() {
	//reset the menu in case it's being resized from a small screen
	// unbind click events    
    $('.menuToggle a').off('click');
    $('.topMenu h3').off('click');
    // remove any expanded menus
	$('.expand').removeClass('expand');
    // remove the span tags inside the menu
    $('.topMenu h3').find('span.indicator').remove();
    // remove the "menu" element
    $('.menuToggle').remove();
	
	//check to see if the device supports touch
	//we'll use touch events instead of click as it will allow us
	//to support both a CSS-driven hover and touch enabled
	//menu for this screen range
	if ('ontouchstart' in document.documentElement)
    {
		//find all 'hover' class and strip them
		 $('.topMenu').find('li.hover').removeClass('hover');
		 //add touch events to submenu headings
		 $(".topMenu h3").bind('touchstart', function(e){
			//find the current submenu
			var currentItem = $(this).siblings('.submenu');
			//remove the expand class from other submenus to close any currently open submenus
			$('ul.submenu').not(currentItem).removeClass('expand');
			//open the selected submenu
			$(this).siblings('.submenu').toggleClass('expand');
		});
		//close submenus if users click outside the menu
		$('html').bind('touchstart', function(e) {
			$('.topMenu').find('ul.submenu').removeClass('expand');
		});
		//stop clicks on the menu from bubbling up
		$('#mainNav').bind('touchstart', function(e){
          	e.stopPropagation();
       });
	}
	//indicate current window state
	windowState = 'medium';
}

function lgMenu() {
    //largely what we'll do here is simple remove functionality that
	//may be left behind by other screen sizes
	//at this size the menu will function as a pure-css driven dropdown
	//advances in touch screen are beginning to make us re-think
	//this approach
    // unbind click and touch events    
    $('.menuToggle a').off('click');
    $('.topMenu h3').off('click touchstart');
	$('html').off('touchstart');
	$('#mainNav').off('touchstart');
    
    // remove any expanded submenus
    $('.topMenu').find('ul.submenu').removeClass('expand');
    
    // remove the span tags inside the menu
    $('.topMenu h3').find('span.indicator').remove();
    
    // remove the "menu" element
    $('.menuToggle').remove();
	
    //indicate current window state
    windowState = 'large';
}

</script>
</body>
</html>
